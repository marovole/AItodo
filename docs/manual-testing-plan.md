# AI Todo MVP Phase 1 - 手动测试计划

## 测试环境准备

### 启动应用
```bash
cd /Users/marovole/GitHub/AItodo
pnpm tauri dev
```

### 测试前置条件
- [ ] 确保网络连接正常
- [ ] 确保已登录 ChatGPT 账号（用于调研功能）
- [ ] 清空测试数据（可选）：删除 `~/Library/Application Support/com.nofwl.chatgpt/aitodo.db`

---

## 测试用例

### 1. 应用启动与界面布局

#### TC-1.1 应用启动
| 步骤 | 预期结果 |
|------|----------|
| 运行 `pnpm tauri dev` | 应用窗口正常打开 |
| 观察主界面 | 显示三栏布局：侧边栏 + 列表 + 详情面板 |
| 检查暗色模式 | 根据系统设置自动适配 |

#### TC-1.2 侧边栏导航
| 步骤 | 预期结果 |
|------|----------|
| 查看侧边栏 | 显示状态分类：全部、待调研、调研中、待审阅、已完成、归档 |
| 点击折叠按钮 | 侧边栏收缩，只显示图标 |
| 再次点击 | 侧边栏展开 |
| 查看各状态数字 | 显示对应状态的任务数量 |

---

### 2. Todo 创建功能

#### TC-2.1 快速创建任务
| 步骤 | 预期结果 |
|------|----------|
| 在顶部输入框输入 "测试任务1" | 输入框显示文字 |
| 按 Enter 或点击添加按钮 | 任务创建成功，出现在列表中 |
| 检查侧边栏数字 | "待调研" 和 "全部" 数量 +1 |

#### TC-2.2 带描述的任务
| 步骤 | 预期结果 |
|------|----------|
| 点击展开按钮（输入框旁） | 显示描述和链接输入框 |
| 输入标题 "带描述的任务" | - |
| 输入描述 "这是任务描述" | - |
| 输入链接 "https://example.com" | - |
| 提交 | 任务创建成功，包含描述和链接 |

#### TC-2.3 空标题验证
| 步骤 | 预期结果 |
|------|----------|
| 不输入任何内容，直接按 Enter | 不创建任务（或显示提示） |

---

### 3. Todo 列表与筛选

#### TC-3.1 列表显示
| 步骤 | 预期结果 |
|------|----------|
| 查看任务列表 | 显示任务标题、状态标签、创建时间 |
| 悬停任务项 | 显示悬停效果 |

#### TC-3.2 状态筛选
| 步骤 | 预期结果 |
|------|----------|
| 点击侧边栏 "待调研" | 只显示待调研状态的任务 |
| 点击 "全部" | 显示所有任务 |
| 点击 "已完成" | 显示已完成的任务（可能为空） |

#### TC-3.3 任务选中
| 步骤 | 预期结果 |
|------|----------|
| 点击任务项 | 任务高亮，右侧详情面板滑入显示 |
| 点击另一个任务 | 切换到新任务详情 |

---

### 4. Todo 详情面板

#### TC-4.1 详情显示
| 步骤 | 预期结果 |
|------|----------|
| 选中一个任务 | 详情面板显示：标题、状态徽章、描述、链接 |
| 查看底部信息 | 显示创建时间和更新时间 |

#### TC-4.2 编辑任务
| 步骤 | 预期结果 |
|------|----------|
| 点击编辑按钮（✏️） | 切换到编辑模式，显示输入框 |
| 修改标题为 "修改后的标题" | - |
| 点击保存 | 保存成功，返回查看模式，标题已更新 |
| 点击取消 | 放弃修改，返回原内容 |

#### TC-4.3 删除任务
| 步骤 | 预期结果 |
|------|----------|
| 点击删除按钮（🗑️） | 显示确认对话框 |
| 点击取消 | 关闭对话框，任务保留 |
| 再次点击删除，确认删除 | 任务被删除，从列表消失 |

#### TC-4.4 关闭详情面板
| 步骤 | 预期结果 |
|------|----------|
| 点击关闭按钮（✕） | 详情面板滑出隐藏 |

---

### 5. 调研功能（核心功能）

#### TC-5.1 开始调研
| 步骤 | 预期结果 |
|------|----------|
| 创建任务 "什么是量子计算" | 任务创建成功 |
| 选中任务，点击 "开始调研" | 状态变为 "调研中" |
| 观察进度组件 | 显示 spinner 动画和计时器 |
| 检查 ChatGPT 窗口 | 自动填入问题并开始 Deep Research |

#### TC-5.2 调研进度显示
| 步骤 | 预期结果 |
|------|----------|
| 等待调研中 | 计时器正常递增 (00:01, 00:02...) |
| 等待 8 分钟 | 显示警告 "调研时间较长，可能遇到问题" |
| 等待 10 分钟 | 显示超时警告 "调研已超时" |

#### TC-5.3 取消调研
| 步骤 | 预期结果 |
|------|----------|
| 调研进行中，点击 "取消调研" | 状态恢复为 "待调研" |
| 进度组件消失 | - |

#### TC-5.4 调研完成
| 步骤 | 预期结果 |
|------|----------|
| 等待调研完成 | 状态变为 "待审阅" |
| 查看详情面板 | 显示 Markdown 格式的调研结果 |
| 检查系统通知 | 收到 "调研完成" 通知 |

#### TC-5.5 通知点击跳转
| 步骤 | 预期结果 |
|------|----------|
| 点击系统通知 | 应用窗口激活，自动打开对应任务详情 |

---

### 6. 调研结果展示

#### TC-6.1 Markdown 渲染
| 步骤 | 预期结果 |
|------|----------|
| 查看调研结果 | 正确渲染标题、列表、代码块、链接 |
| 点击结果中的链接 | 在浏览器中打开 |

#### TC-6.2 复制功能
| 步骤 | 预期结果 |
|------|----------|
| 点击 "复制" 按钮 | 内容复制到剪贴板 |
| 粘贴到其他应用 | 粘贴成功 |

#### TC-6.3 结果元数据
| 步骤 | 预期结果 |
|------|----------|
| 查看结果头部 | 显示来源 "ChatGPT Deep Research" |
| 查看耗时 | 显示调研用时（如 "5分30秒"） |

---

### 7. 状态管理

#### TC-7.1 标记完成
| 步骤 | 预期结果 |
|------|----------|
| 选择 "待审阅" 状态的任务 | - |
| 点击 "标记完成" | 状态变为 "已完成" |
| 检查侧边栏 | "待审阅" -1，"已完成" +1 |

#### TC-7.2 归档任务
| 步骤 | 预期结果 |
|------|----------|
| 点击 "归档" 按钮 | 状态变为 "已归档" |
| 切换到 "归档" 筛选 | 任务显示在列表中 |

---

### 8. 网络状态处理

#### TC-8.1 网络断开提示
| 步骤 | 预期结果 |
|------|----------|
| 关闭 WiFi / 断开网络 | 顶部显示黄色警告条 "网络已断开" |
| 恢复网络 | 警告条自动消失 |

#### TC-8.2 离线时调研
| 步骤 | 预期结果 |
|------|----------|
| 断网状态下点击 "开始调研" | 应显示错误提示或禁用按钮 |

---

### 9. 错误处理

#### TC-9.1 错误提示
| 步骤 | 预期结果 |
|------|----------|
| 触发错误（如数据库异常） | 底部显示红色错误提示条 |
| 点击错误提示 | 提示消失 |

---

### 10. 数据持久化

#### TC-10.1 数据保存
| 步骤 | 预期结果 |
|------|----------|
| 创建多个任务 | - |
| 关闭应用 | - |
| 重新打开应用 | 所有任务仍然存在 |

#### TC-10.2 ChatGPT 登录持久化
| 步骤 | 预期结果 |
|------|----------|
| 在 ChatGPT 窗口登录 | - |
| 关闭并重新打开应用 | 保持登录状态（Cookie 持久化） |

---

## 测试数据建议

### 测试任务列表
1. "什么是人工智能" - 用于测试基本调研
2. "React 18 新特性介绍" - 用于测试技术内容渲染
3. "2024年经济趋势分析" - 用于测试长内容
4. "https://github.com/tauri-apps/tauri 项目介绍" - 用于测试带链接的任务

---

## 已知限制

1. **调研自动化**：依赖 ChatGPT 网页界面的 DOM 结构，如果 OpenAI 更新界面可能需要调整选择器
2. **通知点击**：macOS 上通知点击跳转需要应用在后台运行
3. **超时设置**：当前硬编码为 10 分钟，后续可添加设置页面

---

## 测试报告模板

| 测试用例 | 状态 | 备注 |
|---------|------|------|
| TC-1.1 | ⬜ | |
| TC-1.2 | ⬜ | |
| TC-2.1 | ⬜ | |
| TC-2.2 | ⬜ | |
| TC-2.3 | ⬜ | |
| TC-3.1 | ⬜ | |
| TC-3.2 | ⬜ | |
| TC-3.3 | ⬜ | |
| TC-4.1 | ⬜ | |
| TC-4.2 | ⬜ | |
| TC-4.3 | ⬜ | |
| TC-4.4 | ⬜ | |
| TC-5.1 | ⬜ | |
| TC-5.2 | ⬜ | |
| TC-5.3 | ⬜ | |
| TC-5.4 | ⬜ | |
| TC-5.5 | ⬜ | |
| TC-6.1 | ⬜ | |
| TC-6.2 | ⬜ | |
| TC-6.3 | ⬜ | |
| TC-7.1 | ⬜ | |
| TC-7.2 | ⬜ | |
| TC-8.1 | ⬜ | |
| TC-8.2 | ⬜ | |
| TC-9.1 | ⬜ | |
| TC-10.1 | ⬜ | |
| TC-10.2 | ⬜ | |

**状态标记**: ✅ 通过 | ❌ 失败 | ⬜ 未测试 | ⚠️ 部分通过
